#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Support Bot —á–µ—Ä–µ–∑ systemd

echo "üöÄ –ó–∞–ø—É—Å–∫ Social Flow Support Bot —á–µ—Ä–µ–∑ systemd"
echo "=============================================="

# –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
echo "üóÑÔ∏è –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
cd /root/apps/ai_support_tg_writer_bot
docker-compose up -d

# –ñ–¥–µ–º –ø–æ–∫–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
sleep 10

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
echo "üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ support-bot..."
sudo systemctl start support-bot.service

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
sudo systemctl status support-bot.service --no-pager

echo ""
echo "‚úÖ Support Bot –∑–∞–ø—É—â–µ–Ω!"
echo ""
echo "üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:"
echo "   - Support Bot: http://localhost:8080"
echo "   - PostgreSQL: localhost:6432"
echo "   - Redis: localhost:6389"
echo ""
echo "üì± Telegram –±–æ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ TELEGRAM_BOT_TOKEN"
echo ""
echo "üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º:"
echo "   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: ./stop_service.sh"
echo "   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: ./restart_service.sh"
echo "   - –õ–æ–≥–∏: sudo journalctl -u support-bot -f"
